<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stillwater Admin Dojo</title>

    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <!-- AmCharts -->
    <script src="https://www.amcharts.com/lib/4/core.min.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.min.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

    <!-- Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0f0f0f;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            font-size: 14px;
            line-height: 1.6;
        }

        .header {
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-title img {
            width: 40px;
            height: 40px;
        }

        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .header-title p {
            font-size: 0.9rem;
            color: #999;
        }

        .nav-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.6rem 1.2rem;
            background: #2a2a2a;
            border: 1px solid #444;
            color: #e0e0e0;
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: #3a3a3a;
            border-color: #666;
        }

        .nav-btn.active {
            background: #ff6b35;
            border-color: #ff6b35;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .page > p {
            color: #999;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fff;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
        }

        .chat-box {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            height: 300px;
        }

        .chat-output {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            background: #0f0f0f;
        }

        .chat-input-row {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #333;
        }

        .chat-input {
            flex: 1;
            padding: 0.6rem;
            background: #2a2a2a;
            border: 1px solid #444;
            color: #e0e0e0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .chat-btn {
            padding: 0.6rem 1rem;
            background: #ff6b35;
            border: none;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .chat-btn:hover {
            background: #ff8555;
        }

        .chat-btn.secondary {
            background: #444;
        }

        .chat-btn.secondary:hover {
            background: #555;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .chart-container {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 1.5rem;
            min-height: 300px;
        }

        .chart-container h3 {
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .table-wrapper {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            overflow: hidden;
        }

        .dataTables_wrapper {
            padding: 1rem;
        }

        table.display {
            color: #e0e0e0;
        }

        table.display thead th {
            background: #2a2a2a;
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #444;
        }

        table.display tbody td {
            padding: 0.8rem 1rem;
            border-bottom: 1px solid #333;
        }

        table.display tbody tr:hover {
            background: #252525;
        }

        .mermaid-container {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 2rem;
            overflow-x: auto;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .instructions {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 1.5rem;
        }

        .instruction-item {
            display: flex;
            gap: 1rem;
        }

        .instruction-item img {
            width: 50px;
            height: 50px;
            flex-shrink: 0;
        }

        .instruction-text p {
            margin-bottom: 0.5rem;
        }

        .vscode-btn {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #0078d4;
            color: #fff;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .vscode-btn:hover {
            background: #1084d7;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            .nav-buttons {
                gap: 0.3rem;
            }
            .nav-btn {
                padding: 0.5rem 0.8rem;
                font-size: 0.85rem;
            }
            .reports-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <img id="dropletLogo" src="/images/droplet-logo-merge.gif" alt="Droplet Logo" onload="setupGifSwitch()">
                <div>
                    <h1>Stillwater Admin Dojo</h1>
                    <p>Linux for AI: Teach your AI Kung-fu</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn active" data-page="orchestration">Orchestration</button>
                <button class="nav-btn" data-page="swarms">Swarm Nodes</button>
                <button class="nav-btn" data-page="cpu">CPU Nodes</button>
                <button class="nav-btn" data-page="llm">LLM Settings</button>
                <button class="nav-btn" data-page="sync">Solace AGI Sync</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- ORCHESTRATION PAGE -->
        <div class="page active" data-page="orchestration">
            <h2>Orchestration</h2>
            <p>Configure and monitor the Triple Twin: Explorer, Builder, Arbiter</p>

            <div class="section">
                <div class="section-title">Chat</div>
                <div class="chat-box">
                    <div class="chat-output" id="chat-orch">Ready for input...</div>
                    <div class="chat-input-row">
                        <input type="text" class="chat-input" placeholder="Ask orchestration commands..." autocomplete="off">
                        <button class="chat-btn" onclick="sendChat(this)">Send</button>
                        <button class="chat-btn secondary" onclick="clearChat(this)">Clear</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Reports</div>
                <div class="reports-grid">
                    <div class="chart-container"><h3>Rung Progress</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Task Distribution</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>System Status</h3><div style="height:220px;"></div></div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Data Table</div>
                <div class="table-wrapper">
                    <table class="display" id="table-orch"><thead><tr><th>Role</th><th>Model</th><th>Status</th><th>Last Run</th></tr></thead><tbody>
                        <tr><td>Explorer</td><td>haiku</td><td>Ready</td><td>2 min ago</td></tr>
                        <tr><td>Builder</td><td>sonnet</td><td>Running</td><td>now</td></tr>
                        <tr><td>Arbiter</td><td>sonnet</td><td>Ready</td><td>5 min ago</td></tr>
                    </tbody></table>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Diagram</div>
                <div class="mermaid-container">
                    <div class="mermaid">graph LR
    A["Explorer<br/>haiku"]-->B["Builder<br/>sonnet"]-->C["Arbiter<br/>sonnet"]</div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Instructions</div>
                <div class="instructions">
                    <div class="instruction-item">
                        <img src="/images/droplet-kungfu.png" alt="Droplet Kung-Fu">
                        <div class="instruction-text">
                            <p><strong>Configure Orchestration</strong></p>
                            <p>Edit your orchestration settings:</p>
                            <button class="vscode-btn" onclick="openVSCode('data/custom/orchestration.yaml')">ðŸ”§ Open in VSCode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SWARM NODES PAGE -->
        <div class="page" data-page="swarms">
            <h2>Swarm Nodes</h2>
            <p>Distributed task execution: Coder, Planner, Scout, Skeptic</p>

            <div class="section">
                <div class="section-title">Chat</div>
                <div class="chat-box">
                    <div class="chat-output" id="chat-swarm">Ready for input...</div>
                    <div class="chat-input-row">
                        <input type="text" class="chat-input" placeholder="Ask a swarm to do something..." autocomplete="off">
                        <button class="chat-btn" onclick="sendChat(this)">Send</button>
                        <button class="chat-btn secondary" onclick="clearChat(this)">Clear</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Reports</div>
                <div class="reports-grid">
                    <div class="chart-container"><h3>Success Rates</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Token Usage</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Cost Breakdown</h3><div style="height:220px;"></div></div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Data Table</div>
                <div class="table-wrapper">
                    <table class="display" id="table-swarm"><thead><tr><th>Swarm</th><th>Model</th><th>Success Rate</th><th>Tokens Used</th></tr></thead><tbody>
                        <tr><td>Coder</td><td>sonnet</td><td>92%</td><td>15,000</td></tr>
                        <tr><td>Planner</td><td>sonnet</td><td>87%</td><td>8,000</td></tr>
                        <tr><td>Scout</td><td>haiku</td><td>94%</td><td>3,000</td></tr>
                        <tr><td>Skeptic</td><td>sonnet</td><td>89%</td><td>12,000</td></tr>
                    </tbody></table>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Diagram</div>
                <div class="mermaid-container">
                    <div class="mermaid">graph TD
    A["Task"]-->B["Router"]
    B-->C["Coder"]
    B-->D["Planner"]
    B-->E["Scout"]
    B-->F["Skeptic"]
    C-->G["Result"]
    D-->G
    E-->G
    F-->G</div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Instructions</div>
                <div class="instructions">
                    <div class="instruction-item">
                        <img src="/images/droplet-kungfu.png" alt="Droplet Kung-Fu">
                        <div class="instruction-text">
                            <p><strong>Configure Swarms</strong></p>
                            <p>Edit swarm settings and skill packs:</p>
                            <button class="vscode-btn" onclick="openVSCode('data/custom/orchestration.yaml')">ðŸ”§ Open in VSCode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CPU NODES PAGE -->
        <div class="page" data-page="cpu">
            <h2>CPU Nodes</h2>
            <p>Algorithm performance, latency, and throughput metrics</p>

            <div class="section">
                <div class="section-title">Chat</div>
                <div class="chat-box">
                    <div class="chat-output" id="chat-cpu">Ready for input...</div>
                    <div class="chat-input-row">
                        <input type="text" class="chat-input" placeholder="Ask about algorithm performance..." autocomplete="off">
                        <button class="chat-btn" onclick="sendChat(this)">Send</button>
                        <button class="chat-btn secondary" onclick="clearChat(this)">Clear</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Reports</div>
                <div class="reports-grid">
                    <div class="chart-container"><h3>Latency (ms)</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Throughput</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Error Rate</h3><div style="height:220px;"></div></div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Data Table</div>
                <div class="table-wrapper">
                    <table class="display" id="table-cpu"><thead><tr><th>Algorithm</th><th>Complexity</th><th>Avg Time (ms)</th><th>Executions</th></tr></thead><tbody>
                        <tr><td>Sort</td><td>O(n log n)</td><td>45</td><td>1,234</td></tr>
                        <tr><td>Search</td><td>O(log n)</td><td>12</td><td>5,678</td></tr>
                        <tr><td>Hash</td><td>O(1)</td><td>3</td><td>9,876</td></tr>
                    </tbody></table>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Diagram</div>
                <div class="mermaid-container">
                    <div class="mermaid">graph TD
    A["Input"]-->B["Algorithm"]
    B-->C["Process"]
    C-->D["Output"]
    D-->E["Metrics"]</div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Instructions</div>
                <div class="instructions">
                    <div class="instruction-item">
                        <img src="/images/droplet-kungfu.png" alt="Droplet Kung-Fu">
                        <div class="instruction-text">
                            <p><strong>Optimize Algorithms</strong></p>
                            <p>Edit algorithm implementations:</p>
                            <button class="vscode-btn" onclick="openVSCode('cli/src/stillwater/')">ðŸ”§ Open in VSCode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LLM SETTINGS PAGE -->
        <div class="page" data-page="llm">
            <h2>LLM Settings</h2>
            <p>Model selection, token costs, provider uptime</p>

            <div class="section">
                <div class="section-title">Chat</div>
                <div class="chat-box">
                    <div class="chat-output" id="chat-llm">Ready for input...</div>
                    <div class="chat-input-row">
                        <input type="text" class="chat-input" placeholder="Ask about models and configuration..." autocomplete="off">
                        <button class="chat-btn" onclick="sendChat(this)">Send</button>
                        <button class="chat-btn secondary" onclick="clearChat(this)">Clear</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Reports</div>
                <div class="reports-grid">
                    <div class="chart-container"><h3>Token Cost</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Model Performance</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Provider Uptime</h3><div style="height:220px;"></div></div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Data Table</div>
                <div class="table-wrapper">
                    <table class="display" id="table-llm"><thead><tr><th>Model</th><th>Provider</th><th>Cost/1M tokens</th><th>Status</th></tr></thead><tbody>
                        <tr><td>haiku</td><td>Claude</td><td>$0.80</td><td>Active</td></tr>
                        <tr><td>sonnet</td><td>Claude</td><td>$3.00</td><td>Active</td></tr>
                        <tr><td>opus</td><td>Claude</td><td>$15.00</td><td>Active</td></tr>
                    </tbody></table>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Diagram</div>
                <div class="mermaid-container">
                    <div class="mermaid">graph LR
    A["Request"]-->B["Model Router"]
    B-->C["Haiku"]
    B-->D["Sonnet"]
    B-->E["Opus"]
    C-->F["Response"]
    D-->F
    E-->F</div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Instructions</div>
                <div class="instructions">
                    <div class="instruction-item">
                        <img src="/images/droplet-kungfu.png" alt="Droplet Kung-Fu">
                        <div class="instruction-text">
                            <p><strong>Configure LLM Settings</strong></p>
                            <p>Edit your LLM configuration and model providers:</p>
                            <button class="vscode-btn" onclick="openVSCode('data/default/llm_config.yaml')">ðŸ”§ Open in VSCode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SOLACE AGI SYNC PAGE -->
        <div class="page" data-page="sync">
            <h2>Solace AGI Sync</h2>
            <p>Cloud backup, Firestore integration, data sync status</p>

            <div class="section">
                <div class="section-title">Chat</div>
                <div class="chat-box">
                    <div class="chat-output" id="chat-sync">Ready for input...</div>
                    <div class="chat-input-row">
                        <input type="text" class="chat-input" placeholder="Ask about cloud sync and backup..." autocomplete="off">
                        <button class="chat-btn" onclick="sendChat(this)">Send</button>
                        <button class="chat-btn secondary" onclick="clearChat(this)">Clear</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Reports</div>
                <div class="reports-grid">
                    <div class="chart-container"><h3>Sync Status</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Data Volume</h3><div style="height:220px;"></div></div>
                    <div class="chart-container"><h3>Firestore Health</h3><div style="height:220px;"></div></div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Data Table</div>
                <div class="table-wrapper">
                    <table class="display" id="table-sync"><thead><tr><th>Timestamp</th><th>Action</th><th>Status</th><th>Bytes</th></tr></thead><tbody>
                        <tr><td>2026-02-23 10:45</td><td>Upload</td><td>Success</td><td>1.2 MB</td></tr>
                        <tr><td>2026-02-23 10:30</td><td>Download</td><td>Success</td><td>0.8 MB</td></tr>
                        <tr><td>2026-02-23 10:15</td><td>Verify</td><td>Success</td><td>0 MB</td></tr>
                    </tbody></table>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Diagram</div>
                <div class="mermaid-container">
                    <div class="mermaid">graph LR
    A["Local Data"]-->B["API Gateway"]
    B-->C["Cloud Storage"]
    B-->D["Firestore"]
    C-->E["Sync Status"]
    D-->E</div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Instructions</div>
                <div class="instructions">
                    <div class="instruction-item">
                        <img src="/images/droplet-kungfu.png" alt="Droplet Kung-Fu">
                        <div class="instruction-text">
                            <p><strong>Configure Cloud Sync</strong></p>
                            <p>Enable Firestore sync with your API key:</p>
                            <button class="vscode-btn" onclick="openVSCode('data/custom/settings.md')">ðŸ”§ Open in VSCode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });

        // GIF animation
        function setupGifSwitch() {
            const dropletLogo = document.getElementById('dropletLogo');
            setTimeout(() => {
                dropletLogo.src = '/images/droplet-logo-rotating.gif';
            }, 8200);
        }

        // Page Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const page = e.target.dataset.page;
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                document.querySelector(`[data-page="${page}"]`).classList.add('active');
                e.target.classList.add('active');
                setTimeout(() => mermaid.contentLoaded(), 100);
            });
        });

        // Initialize DataTables
        ['orch', 'swarm', 'cpu', 'llm', 'sync'].forEach(page => {
            try {
                $(`#table-${page}`).DataTable({ paging: false, searching: true, info: false });
            } catch (e) {}
        });

        // Chat
        function sendChat(btn) {
            const input = btn.parentElement.querySelector('.chat-input');
            const output = btn.parentElement.parentElement.querySelector('.chat-output');
            if (input.value.trim()) {
                const line = document.createElement('div');
                line.textContent = `$ ${input.value}`;
                output.appendChild(line);
                output.scrollTop = output.scrollHeight;
                input.value = '';
            }
        }

        function clearChat(btn) {
            btn.parentElement.parentElement.querySelector('.chat-output').innerHTML = 'Chat cleared';
        }

        // VSCode Integration
        function openVSCode(file) {
            fetch('/api/vscode/open', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ file })
            }).then(r => r.json()).then(d => {
                if (!d.success) alert(`Error: ${d.message}`);
            }).catch(e => alert(`Failed: ${e.message}`));
        }

        // Init on load
        document.addEventListener('DOMContentLoaded', () => {
            mermaid.contentLoaded();
        });
    </script>
</body>
</html>
