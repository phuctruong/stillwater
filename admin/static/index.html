<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stillwater Admin Dojo</title>
    <link rel="stylesheet" href="/static/app.css" />
  </head>
  <body>
    <div class="bg-overlay"></div>
    <header class="topbar">
      <div>
        <h1>Stillwater Admin Dojo</h1>
        <p>Kernel controls, ripple editing, and PHUC operations from one board.</p>
      </div>
      <div class="status-chip" id="serverClock">--</div>
    </header>

    <main class="layout">
      <section class="panel">
        <h2>Skills / Swarms / Recipes / Papers</h2>
        <p class="sub">Select a file, edit, and save. New groups: Skills, Swarms, Recipes, Papers available as primary tabs.</p>

        <div class="file-controls">
          <div id="groupTabs" class="tabs"></div>
          <button id="refreshCatalogBtn">Refresh</button>
        </div>

        <div class="file-controls">
          <input id="newFilename" type="text" placeholder="new-file.md" />
          <button id="createFileBtn">Create</button>
        </div>

        <div class="file-grid">
          <aside>
            <ul id="fileList"></ul>
            <div class="quick-files">
              <h3>Quick Files</h3>
              <ul id="extraList"></ul>
            </div>
          </aside>
          <div>
            <div class="editor-head">
              <code id="activePath">(none)</code>
              <button id="saveFileBtn">Save</button>
            </div>
            <textarea id="fileEditor" spellcheck="false"></textarea>
          </div>
        </div>
      </section>

      <section class="panel">
        <h2>LLM + Ollama Ops</h2>
        <p class="sub">Probe status, change providers, install Ollama, and pull models.</p>

        <div id="llmSummary" class="summary-box"></div>
        <button id="refreshLlmBtn">Refresh LLM Status</button>

        <div class="form-row">
          <input id="providerInput" placeholder="provider (ollama/openai/claude...)" />
          <input id="ollamaUrlInput" placeholder="ollama url (http://host:11434)" />
          <input id="ollamaModelInput" placeholder="ollama model (llama3.1:8b)" />
          <button id="saveLlmConfigBtn">Save LLM Config</button>
        </div>

        <div class="form-row">
          <input id="installSudoPwd" type="password" placeholder="sudo password for install" />
          <button id="installOllamaBtn">Install Ollama</button>
        </div>

        <div class="form-row">
          <input id="pullModelInput" placeholder="model to pull (qwen2.5-coder:7b)" />
          <button id="pullModelBtn">Pull Model</button>
        </div>
      </section>

      <section class="panel">
        <h2>Community Hub (Mock)</h2>
        <p class="sub">Prepare for recipe/skill marketplace and extension sync.</p>

        <div id="communitySummary" class="summary-box"></div>

        <div class="form-row">
          <input id="communityEmail" placeholder="you@company.com" />
          <button id="linkCommunityBtn">Send Magic Link + Get API Key (Stub)</button>
        </div>

        <div class="form-row">
          <select id="syncDirection">
            <option value="both">Sync Both Ways</option>
            <option value="upload">Upload Local to Community</option>
            <option value="download">Download Community to Local</option>
          </select>
          <button id="syncCommunityBtn">Sync Recipes/Skills (Mock)</button>
        </div>
      </section>

      <section class="panel">
        <h2>CLI Runner</h2>
        <p class="sub">Run allowlisted <code>stillwater</code> commands from the web. All commands are server-side allowlisted â€” no arbitrary execution.</p>

        <div class="form-row">
          <select id="cliCommand">
            <option value="version">version</option>
            <option value="doctor">doctor</option>
            <option value="llm-status">llm-status</option>
          </select>
          <button id="runCliBtn">Run Command</button>
        </div>

        <pre id="cliOutput" class="summary-box" style="min-height:4rem;white-space:pre-wrap;"></pre>
      </section>

      <section class="panel logs">
        <h2>Operations Log</h2>
        <pre id="logBox"></pre>
      </section>
    </main>

    <script src="/static/app.js"></script>
  </body>
</html>
